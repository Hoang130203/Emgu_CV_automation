<Window x:Class="GameAutomation.UI.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GameAutomation.UI.WPF"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Game Automation Bot"
        MinHeight="600" MinWidth="1000"
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F7FA"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Null to Visible Converter -->
        <local:NullToVisibilityConverter x:Key="NullToVisibleConverter"/>

        <!-- Responsive Grid Splitter Style -->
        <Style x:Key="ResponsiveGridSplitter" TargetType="GridSplitter">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="VerticalAlignment" Value="Stretch"/>
        </Style>

        <!-- Thin ScrollBar Style (3px) -->
        <Style x:Key="ThinScrollBar" TargetType="ScrollBar">
            <Setter Property="Width" Value="3"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid>
                            <Border Background="{TemplateBinding Background}" CornerRadius="1.5"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True" Width="3">
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Style>
                                            <Style TargetType="Thumb">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Thumb">
                                                            <Border Background="#D0D0D0" CornerRadius="1.5" Width="3"/>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Thumb">
                                                                    <Border Background="#A0A0A0" CornerRadius="1.5" Width="3"/>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Thumb.Style>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Thin ScrollViewer Style -->
        <Style x:Key="ThinScrollViewer" TargetType="ScrollViewer">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ScrollContentPresenter Grid.Column="0" Grid.Row="0"/>

                            <ScrollBar x:Name="PART_VerticalScrollBar"
                                      Grid.Column="1"
                                      Grid.Row="0"
                                      Value="{TemplateBinding VerticalOffset}"
                                      Maximum="{TemplateBinding ScrollableHeight}"
                                      ViewportSize="{TemplateBinding ViewportHeight}"
                                      Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                      Style="{StaticResource ThinScrollBar}"
                                      Margin="2,0,0,0"/>

                            <ScrollBar x:Name="PART_HorizontalScrollBar"
                                      Grid.Column="0"
                                      Grid.Row="1"
                                      Orientation="Horizontal"
                                      Value="{TemplateBinding HorizontalOffset}"
                                      Maximum="{TemplateBinding ScrollableWidth}"
                                      ViewportSize="{TemplateBinding ViewportWidth}"
                                      Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <materialDesign:DialogHost Identifier="RootDialog">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*" MinHeight="400"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Top Bar with Gradient - Responsive -->
            <Border Grid.Row="0" Background="{StaticResource HeaderGradient}" Padding="20,16" MinHeight="70">
                <Border.Effect>
                    <DropShadowEffect Color="#667eea" Opacity="0.3" BlurRadius="20" ShadowDepth="5"/>
                </Border.Effect>
                <DockPanel LastChildFill="True">
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                        <Ellipse Width="40" Height="40" Margin="0,0,12,0">
                            <Ellipse.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="White" Offset="0"/>
                                    <GradientStop Color="#f0f0f0" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                            <Ellipse.Effect>
                                <DropShadowEffect Color="Black" Opacity="0.2" BlurRadius="8" ShadowDepth="2"/>
                            </Ellipse.Effect>
                        </Ellipse>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Game Automation Bot" FontSize="22" FontWeight="Bold" Foreground="White" TextWrapping="NoWrap">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="5" ShadowDepth="2"/>
                                </TextBlock.Effect>
                            </TextBlock>
                            <TextBlock Text="AI-Powered Gaming Assistant" FontSize="11" Foreground="White" Opacity="0.9" Margin="0,2,0,0" TextWrapping="NoWrap"/>
                        </StackPanel>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignIconButton}"
                                Command="{Binding OpenSettingsCommand}"
                                ToolTip="Settings" Foreground="White" Margin="0,0,4,0">
                            <materialDesign:PackIcon Kind="Cog" Width="22" Height="22"/>
                        </Button>
                        <Button Style="{StaticResource MaterialDesignIconButton}" ToolTip="Help" Foreground="White">
                            <materialDesign:PackIcon Kind="HelpCircle" Width="22" Height="22"/>
                        </Button>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- Main Content - Responsive Grid -->
            <Grid Grid.Row="1" Margin="16" MinHeight="400">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280" MinWidth="250" MaxWidth="400"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*" MinWidth="500"/>
                </Grid.ColumnDefinitions>

                <!-- Left Panel - Control with ScrollViewer -->
                <Border Grid.Column="0" Background="White" CornerRadius="20" Padding="20 20 0 20">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity="0.08" BlurRadius="25" ShadowDepth="5"/>
                    </Border.Effect>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Style="{StaticResource ThinScrollViewer}">
                        <StackPanel Margin="0 0 10 0">
                            <!-- Bot Status -->
                            <TextBlock Text="Bot Status" FontSize="18" FontWeight="Bold" Foreground="#2D3436" Margin="0,0,0,16"/>

                            <Border Background="#F8F9FA" CornerRadius="12" Padding="14" Margin="0,0,0,20">
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="10" Height="10" Margin="0,0,10,0">
                                        <Ellipse.Fill>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#00b894" Offset="0"/>
                                                <GradientStop Color="#00cec9" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <TextBlock Text="{Binding BotStatus}" FontSize="14" FontWeight="SemiBold" Foreground="#2D3436" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                                </StackPanel>
                            </Border>

                            <!-- Control Buttons -->
                            <Button Command="{Binding StartBotCommand}"
                                    Margin="0,0,0,10"
                                    Height="52"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    FontWeight="Bold"
                                    FontSize="13">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#56ab2f" Offset="0"/>
                                                    <GradientStop Color="#a8e063" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="12"
                                                            Padding="16,0">
                                                        <Border.Effect>
                                                            <DropShadowEffect Color="#56ab2f" Opacity="0.4" BlurRadius="15" ShadowDepth="5"/>
                                                        </Border.Effect>
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Opacity" Value="0.9"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="Play" Width="18" Height="18" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                    <TextBlock Text="START BOT" FontSize="13" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button Command="{Binding StopBotCommand}"
                                    Margin="0,0,0,10"
                                    Height="52"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    FontWeight="Bold"
                                    FontSize="13">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#f093fb" Offset="0"/>
                                                    <GradientStop Color="#f5576c" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            CornerRadius="12"
                                                            Padding="16,0">
                                                        <Border.Effect>
                                                            <DropShadowEffect Color="#f093fb" Opacity="0.4" BlurRadius="15" ShadowDepth="5"/>
                                                        </Border.Effect>
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Opacity" Value="0.9"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="Stop" Width="18" Height="18" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                    <TextBlock Text="STOP BOT" FontSize="13" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <!-- Configuration -->
                            <TextBlock Text="Configuration" FontSize="18" FontWeight="Bold" Foreground="#2D3436" Margin="0,24,0,16"/>

                            <TextBlock Text="Game Window Title" FontSize="11" Foreground="#636e72" Margin="0,0,0,6"/>
                            <Border Background="White" BorderBrush="#e1e8ed" BorderThickness="2" CornerRadius="10" Margin="0,0,0,12">
                                <TextBox Text="{Binding GameWindowTitle, UpdateSourceTrigger=PropertyChanged}"
                                        BorderThickness="0"
                                        Padding="10,8"
                                        FontSize="13"
                                        Background="Transparent"
                                        TextWrapping="NoWrap"/>
                            </Border>

                            <TextBlock Text="AI Provider" FontSize="11" Foreground="#636e72" Margin="0,0,0,6"/>
                            <Border Background="White" BorderBrush="#e1e8ed" BorderThickness="2" CornerRadius="10" Margin="0,0,0,12">
                                <ComboBox SelectedItem="{Binding SelectedAIProvider}"
                                         BorderThickness="0"
                                         Padding="10,8"
                                         FontSize="13"
                                         Background="Transparent">
                                    <ComboBoxItem Content="None" IsSelected="True"/>
                                    <ComboBoxItem Content="ML.NET (Local)"/>
                                    <ComboBoxItem Content="OpenAI GPT-4 Vision"/>
                                    <ComboBoxItem Content="Claude Vision"/>
                                </ComboBox>
                            </Border>

                            <TextBlock Text="API Key (if using AI)" FontSize="11" Foreground="#636e72" Margin="0,0,0,6"/>
                            <Border Background="White" BorderBrush="#e1e8ed" BorderThickness="2" CornerRadius="10" Margin="0,0,0,12">
                                <TextBox Text="{Binding ApiKey, UpdateSourceTrigger=PropertyChanged}"
                                        BorderThickness="0"
                                        Padding="10,8"
                                        FontSize="13"
                                        Background="Transparent"/>
                            </Border>

                            <!-- Assets -->
                            <TextBlock Text="Assets" FontSize="18" FontWeight="Bold" Foreground="#2D3436" Margin="0,24,0,16"/>

                            <Button Command="{Binding OpenAssetsFolderCommand}"
                                    Margin="0,0,0,8"
                                    Height="44"
                                    Cursor="Hand"
                                    Background="Transparent"
                                    BorderBrush="#667eea"
                                    BorderThickness="2"
                                    FontWeight="SemiBold">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="10"
                                                            Padding="12,0">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Foreground" Value="#667eea"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="#667eea" Opacity="0.1"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="FolderImage" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <TextBlock Text="Open Assets" FontSize="12" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button Command="{Binding UploadTemplatesCommand}"
                                    Margin="0,0,0,8"
                                    Height="44"
                                    Cursor="Hand"
                                    Background="Transparent"
                                    BorderBrush="#4facfe"
                                    BorderThickness="2"
                                    FontWeight="SemiBold">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="10"
                                                            Padding="12,0">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Foreground" Value="#4facfe"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="#4facfe" Opacity="0.1"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="Upload" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <TextBlock Text="Upload" FontSize="12" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button Command="{Binding OpenRegionEditorCommand}"
                                    Margin="0,0,0,8"
                                    Height="44"
                                    Cursor="Hand"
                                    Background="Transparent"
                                    BorderBrush="#e17055"
                                    BorderThickness="2"
                                    FontWeight="SemiBold">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="10"
                                                            Padding="12,0">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Foreground" Value="#e17055"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="#e17055" Opacity="0.1"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="MapMarkerRadius" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <TextBlock Text="Region Editor" FontSize="12" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                        </StackPanel>
                    </ScrollViewer>
                </Border>

                <!-- Grid Splitter (Optional - for resizable panels) -->
                <GridSplitter Grid.Column="1" Width="5" Style="{StaticResource ResponsiveGridSplitter}"/>

                <!-- Right Panel - Tabs with ScrollViewer -->
                <Border Grid.Column="2" Background="White" CornerRadius="20" Padding="0" Margin="0,0,0,0">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity="0.08" BlurRadius="25" ShadowDepth="5"/>
                    </Border.Effect>
                    <TabControl BorderThickness="0" Background="Transparent" Padding="0">
                        <!-- Vision Tab -->
                        <TabItem Header="Vision">
                            <TabItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="8,4">
                                        <materialDesign:PackIcon Kind="Eye" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                        <TextBlock Text="Vision" VerticalAlignment="Center" FontSize="13"/>
                                    </StackPanel>
                                </DataTemplate>
                            </TabItem.HeaderTemplate>
                            <Grid Margin="20">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*" MinHeight="300"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="Screen Preview" FontSize="18" FontWeight="Bold" Foreground="#2D3436" Margin="0,0,0,16"/>

                                <Border Grid.Row="1" Background="#F8F9FA" BorderBrush="#e1e8ed"
                                        BorderThickness="2" CornerRadius="16">
                                    <Viewbox Stretch="Uniform" Margin="16">
                                        <Grid Width="800" Height="450">
                                            <Image x:Name="ScreenPreview" Source="{Binding ScreenPreview}" Stretch="Uniform"/>
                                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       Visibility="{Binding ScreenPreview, Converter={StaticResource NullToVisibleConverter}, FallbackValue=Visible}">
                                                <materialDesign:PackIcon Kind="MonitorScreenshot" Width="64" Height="64" Foreground="#b2bec3" Margin="0,0,0,16"/>
                                                <TextBlock Text="No preview available" FontSize="16" FontWeight="SemiBold" Foreground="#636e72" HorizontalAlignment="Center"/>
                                                <TextBlock Text="Click 'Screenshot' to capture or start the bot" FontSize="13" Foreground="#b2bec3" HorizontalAlignment="Center" Margin="0,4,0,0" TextWrapping="Wrap" TextAlignment="Center" MaxWidth="300"/>
                                            </StackPanel>
                                        </Grid>
                                    </Viewbox>
                                </Border>
                            </Grid>
                        </TabItem>

                        <!-- Workflows Tab -->
                        <TabItem Header="Workflows">
                            <TabItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="8,4">
                                        <materialDesign:PackIcon Kind="FormatListChecks" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                        <TextBlock Text="Workflows" VerticalAlignment="Center" FontSize="13"/>
                                    </StackPanel>
                                </DataTemplate>
                            </TabItem.HeaderTemplate>
                            <Grid Margin="20">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*" MinHeight="300"/>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                                    <TextBlock Text="Active Workflows" FontSize="18" FontWeight="Bold" Foreground="#2D3436" VerticalAlignment="Center"/>
                                    <Button Margin="12,0,0,0"
                                            Background="Transparent"
                                            BorderBrush="#56ab2f"
                                            BorderThickness="2"
                                            Width="32" Height="32"
                                            Cursor="Hand">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    CornerRadius="8">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="#56ab2f" Opacity="0.1"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                        <materialDesign:PackIcon Kind="Plus" Width="16" Height="16" Foreground="#56ab2f"/>
                                    </Button>
                                </StackPanel>

                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Style="{StaticResource ThinScrollViewer}">
                                    <DataGrid ItemsSource="{Binding Workflows}"
                                             AutoGenerateColumns="False"
                                             CanUserAddRows="False"
                                             CanUserDeleteRows="False"
                                             IsReadOnly="True"
                                             SelectionMode="Single"
                                             HeadersVisibility="Column"
                                             GridLinesVisibility="None"
                                             Background="Transparent"
                                             BorderThickness="0">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Workflow Name" Binding="{Binding Name}" Width="*" MinWidth="150"/>
                                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                                            <DataGridTextColumn Header="Executions" Binding="{Binding ExecutionCount}" Width="100"/>
                                            <DataGridTemplateColumn Header="Actions" Width="120">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                            <Button Command="{Binding PlayCommand}"
                                                                    Style="{StaticResource MaterialDesignIconButton}"
                                                                    Width="28" Height="28" Padding="0"
                                                                    ToolTip="Run this workflow">
                                                                <materialDesign:PackIcon Kind="Play" Width="14" Height="14" Foreground="#56ab2f"/>
                                                            </Button>
                                                            <Button Style="{StaticResource MaterialDesignIconButton}" Width="28" Height="28" Padding="0"
                                                                    ToolTip="Edit workflow">
                                                                <materialDesign:PackIcon Kind="Pencil" Width="14" Height="14"/>
                                                            </Button>
                                                            <Button Style="{StaticResource MaterialDesignIconButton}" Width="28" Height="28" Padding="0"
                                                                    ToolTip="Delete workflow">
                                                                <materialDesign:PackIcon Kind="Delete" Width="14" Height="14"/>
                                                            </Button>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </ScrollViewer>
                            </Grid>
                        </TabItem>

                        <!-- Logs Tab -->
                        <TabItem Header="Logs">
                            <TabItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="8,4">
                                        <materialDesign:PackIcon Kind="TextBox" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                        <TextBlock Text="Logs" VerticalAlignment="Center" FontSize="13"/>
                                    </StackPanel>
                                </DataTemplate>
                            </TabItem.HeaderTemplate>
                            <Grid Margin="20">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*" MinHeight="300"/>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                                    <TextBlock Text="Bot Activity Logs" FontSize="18" FontWeight="Bold" Foreground="#2D3436" VerticalAlignment="Center"/>
                                    <Button Command="{Binding ClearLogsCommand}"
                                            Margin="12,0,0,0"
                                            Background="Transparent"
                                            BorderBrush="#f093fb"
                                            BorderThickness="2"
                                            Width="32" Height="32"
                                            Cursor="Hand"
                                            ToolTip="Clear Logs">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    CornerRadius="8">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="#f093fb" Opacity="0.1"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                        <materialDesign:PackIcon Kind="Delete" Width="16" Height="16" Foreground="#f093fb"/>
                                    </Button>
                                </StackPanel>

                                <Border Grid.Row="1"
                                        Background="#1e1e1e"
                                        BorderBrush="#e1e8ed"
                                        BorderThickness="2"
                                        CornerRadius="16"
                                        Padding="12">
                                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Style="{StaticResource ThinScrollViewer}">
                                        <TextBox x:Name="LogTextBox"
                                                IsReadOnly="True"
                                                TextWrapping="Wrap"
                                                FontFamily="Consolas"
                                                FontSize="12"
                                                Background="Transparent"
                                                Foreground="#00f2fe"
                                                BorderThickness="0"
                                                Text="{Binding Logs}"/>
                                    </ScrollViewer>
                                </Border>
                            </Grid>
                        </TabItem>

                        <!-- Statistics Tab -->
                        <TabItem Header="Statistics">
                            <TabItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="8,4">
                                        <materialDesign:PackIcon Kind="ChartLine" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                        <TextBlock Text="Statistics" VerticalAlignment="Center" FontSize="13"/>
                                    </StackPanel>
                                </DataTemplate>
                            </TabItem.HeaderTemplate>
                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Style="{StaticResource ThinScrollViewer}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Text="Bot Performance" FontSize="18" FontWeight="Bold" Foreground="#2D3436" Margin="0,0,0,16"/>

                                    <UniformGrid Grid.Row="1" Rows="1" Columns="3" Margin="0,0,0,20">
                                        <!-- Runtime Card -->
                                        <Border Margin="0,0,8,0" CornerRadius="14" Padding="20" MinHeight="120">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#667eea" Offset="0"/>
                                                    <GradientStop Color="#764ba2" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <Border.Effect>
                                                <DropShadowEffect Color="#667eea" Opacity="0.4" BlurRadius="20" ShadowDepth="8"/>
                                            </Border.Effect>
                                            <StackPanel VerticalAlignment="Center">
                                                <materialDesign:PackIcon Kind="ClockOutline" Width="28" Height="28" Foreground="White" Opacity="0.8" Margin="0,0,0,8"/>
                                                <TextBlock Text="Runtime" FontSize="12" Foreground="White" Opacity="0.8"/>
                                                <Viewbox MaxHeight="40" Margin="0,6,0,0">
                                                    <TextBlock Text="{Binding Runtime}" FontWeight="Bold" Foreground="White"/>
                                                </Viewbox>
                                            </StackPanel>
                                        </Border>

                                        <!-- Actions Card -->
                                        <Border Margin="4,0,4,0" CornerRadius="14" Padding="20" MinHeight="120">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#f093fb" Offset="0"/>
                                                    <GradientStop Color="#f5576c" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <Border.Effect>
                                                <DropShadowEffect Color="#f093fb" Opacity="0.4" BlurRadius="20" ShadowDepth="8"/>
                                            </Border.Effect>
                                            <StackPanel VerticalAlignment="Center">
                                                <materialDesign:PackIcon Kind="FlashOutline" Width="28" Height="28" Foreground="White" Opacity="0.8" Margin="0,0,0,8"/>
                                                <TextBlock Text="Actions" FontSize="12" Foreground="White" Opacity="0.8"/>
                                                <Viewbox MaxHeight="40" Margin="0,6,0,0">
                                                    <TextBlock Text="{Binding ActionCount}" FontWeight="Bold" Foreground="White"/>
                                                </Viewbox>
                                            </StackPanel>
                                        </Border>

                                        <!-- Detections Card -->
                                        <Border Margin="8,0,0,0" CornerRadius="14" Padding="20" MinHeight="120">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#4facfe" Offset="0"/>
                                                    <GradientStop Color="#00f2fe" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <Border.Effect>
                                                <DropShadowEffect Color="#4facfe" Opacity="0.4" BlurRadius="20" ShadowDepth="8"/>
                                            </Border.Effect>
                                            <StackPanel VerticalAlignment="Center">
                                                <materialDesign:PackIcon Kind="EyeOutline" Width="28" Height="28" Foreground="White" Opacity="0.8" Margin="0,0,0,8"/>
                                                <TextBlock Text="Detections" FontSize="12" Foreground="White" Opacity="0.8"/>
                                                <Viewbox MaxHeight="40" Margin="0,6,0,0">
                                                    <TextBlock Text="{Binding DetectionCount}" FontWeight="Bold" Foreground="White"/>
                                                </Viewbox>
                                            </StackPanel>
                                        </Border>
                                    </UniformGrid>

                                    <TextBlock Grid.Row="2" Text="Recent detections will appear here..."
                                              Foreground="#b2bec3" FontSize="13" TextWrapping="Wrap" Margin="0,8,0,0"/>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Border>
            </Grid>

            <!-- Status Bar - Responsive -->
            <Border Grid.Row="2" Background="White" Padding="16,10" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" MinHeight="40">
                <DockPanel LastChildFill="True">
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                        <Ellipse Width="8" Height="8" Margin="0,0,8,0" VerticalAlignment="Center">
                            <Ellipse.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#00b894" Offset="0"/>
                                    <GradientStop Color="#00cec9" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>
                        <TextBlock Text="{Binding BotStatus}" FontSize="12" FontWeight="SemiBold" Foreground="#2D3436" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" HorizontalAlignment="Right">
                        <Border Background="#F8F9FA" CornerRadius="6" Padding="10,4" Margin="0,0,12,0">
                            <TextBlock VerticalAlignment="Center" FontSize="11" FontWeight="SemiBold" Foreground="#636e72">
                                <Run Text="FPS: "/><Run Text="{Binding Fps, Mode=OneWay}" Foreground="#667eea"/>
                            </TextBlock>
                        </Border>
                        <Border Background="#F8F9FA" CornerRadius="6" Padding="10,4">
                            <TextBlock VerticalAlignment="Center" FontSize="11" FontWeight="SemiBold" Foreground="#636e72">
                                <Run Text="Memory: "/><Run Text="{Binding MemoryUsage, StringFormat=F2, Mode=OneWay}" Foreground="#f093fb"/><Run Text=" MB"/>
                            </TextBlock>
                        </Border>
                    </StackPanel>
                </DockPanel>
            </Border>
        </Grid>
    </materialDesign:DialogHost>
</Window>
